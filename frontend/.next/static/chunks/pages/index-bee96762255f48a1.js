(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(6048)}])},6048:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return u}});var c=n(5893),o=n(7294),r=n(1230),a=n(7642);let s=(0,a.io)("ws://192.168.0.132:4000");var i=()=>{let[t,e]=(0,o.useState)(null),n=(0,o.useRef)(null),a=(0,o.useRef)(1),i=(0,o.useRef)(0),u=(0,o.useRef)(0),l=t=>{var e;console.log(t),null!==u&&(null===(e=n.current)||void 0===e?void 0:e.graphStyle)&&(console.log("Selected question ID:",u.current,n.current.graphStyle),s.emit("selectGraph",u.current,n.current.graphStyle,t))};(0,o.useEffect)(()=>{n.current=t},[t]),(0,o.useEffect)(()=>{let t=async t=>{0===t?(l(!1),i.current=t,u.current=0,e(null)):(l(!1),i.current=t,a.current=1,await h(a.current,t))},n=async()=>{if(0===i.current)return;let t=a.current+1,e=await h(t,i.current);e&&(l(!1),a.current=t)},c=async()=>{if(0===i.current||a.current<=1)return;let t=a.current-1,e=await h(t,i.current);e&&(l(!1),a.current=t)},o=()=>{0!==i.current&&(console.log("ws connected sucesful"),h(a.current,i.current))};return s.on("nextQuestion",n),s.on("toggleGraph",l),s.on("prevQuestion",c),s.on("updateQuestion",o),s.on("selectSurvey",t),0!==i.current&&h(a.current,i.current),()=>{s.off("nextQuestion",n),s.off("prevQuestion",c),s.off("updateQuestion",o),s.off("selectSurvey",t)}},[]);let h=async(t,n)=>{try{let c=await r.Z.getQuestionBySequenceAndSurveyId(t,n);if(c.ok){let t=await c.json();return u.current=t.id,console.log(t),e(t),!0}}catch(t){console.error("Failed to connect to server to get question.")}return!1};if(0===i.current)return(0,c.jsx)("div",{className:"bg-[#424242] h-screen text-white flex justify-center items-center text-5xl"});if(!t)return(0,c.jsx)("div",{className:"bg-[#424242] h-screen text-white flex justify-center items-center text-xl",children:(0,c.jsx)("p",{children:"Wacht tot een vraag geselecteerd wordt! (Als dit sherm zichtbaar is, is er iets misgelopen in de code)"})});let{window:d}=t,f=(t,e)=>"".concat(Math.max(.3*Math.min(e,t),10),"px"),p=async(e,n)=>{try{let c=await r.Z.castVote(t.id,e,n);if(c.ok){let t=await c.json();console.log(t)}}catch(t){console.error(t)}};return(0,c.jsxs)("div",{className:"h-screen w-screen relative",style:{backgroundColor:d.background||"#1a1941"},children:[(0,c.jsx)("div",{className:"absolute flex items-center justify-center text-center font-bold bg-[#ffffff3f] border-solid border-8 rounded",style:{left:"".concat(d.text.x,"px"),top:"".concat(d.text.y,"px"),width:"".concat(d.text.width,"px"),height:"".concat(d.text.height,"px"),fontSize:f(d.text.height,d.text.width),color:"white"},children:t.question}),d.buttons.map(t=>(0,c.jsx)("button",{className:"absolute font-bold rounded transition-all flex items-center justify-center text-center bg-[#ffffff3f] border-solid border-8 border-blue-400 active:bg-blue-200",style:{left:"".concat(t.x,"px"),top:"".concat(t.y,"px"),width:"".concat(t.width,"px"),height:"".concat(t.height,"px"),fontSize:f(t.height,t.width),color:"white"},onClick:()=>p(t.text,t.weight),children:t.text},t.id))]})},u=()=>(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(i,{})})},1230:function(t,e){"use strict";let n=async(t,e)=>await fetch("".concat("http://192.168.0.132:8000","/question/").concat(e,"/").concat(t),{method:"GET",headers:{"Content-Type":"application/json"}}),c=async()=>await fetch("".concat("http://192.168.0.132:8000","/question/all"),{method:"GET",headers:{"Content-Type":"application/json"}}),o=async t=>await fetch("".concat("http://192.168.0.132:8000","/question/").concat(t),{method:"GET",headers:{"Content-Type":"application/json"}}),r=async t=>await fetch("".concat("http://192.168.0.132:8000","/question/update/").concat(t.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});e.Z={getQuestionBySequenceAndSurveyId:n,getAllQuestions:c,getAllQuestionsBysurveyId:o,changeQuestion:r,createQuestion:(t,e)=>fetch("".concat("http://192.168.0.132:8000","/survey/").concat(e,"/question"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),removeQuestion:t=>fetch("".concat("http://192.168.0.132:8000","/question/remove/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json"}}),castVote:(t,e,n)=>fetch("".concat("http://192.168.0.132:8000","/question/vote/").concat(t,"/").concat(e,"/").concat(n),{method:"POST",headers:{"Content-Type":"application/json"}})}}},function(t){t.O(0,[642,774,888,179],function(){return t(t.s=8312)}),_N_E=t.O()}]);