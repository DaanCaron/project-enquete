(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[645],{4067:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/graph",function(){return s(9250)}])},9250:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var n=s(5893),r=s(9638),a=s(7294),l=s(7642);s(1719);var i=s(5219),c=s(2550);function u(e){let{value:t,maxValue:s=100,size:r=200,height:a=120}=e,l=Math.min(Math.max(t,0),s)/s*100,i=r/2,u=r/2,o=.4*r,f=.48*r,h=(180-l/100*180)*Math.PI/180,d=.9*f;return(0,n.jsxs)("svg",{width:r,height:a,children:[(0,n.jsx)(c.L,{cx:i,cy:u,innerRadius:o,outerRadius:f,startAngle:180,endAngle:0,fill:"#eee"}),l<50&&(0,n.jsx)(c.L,{cx:i,cy:u,innerRadius:o,outerRadius:f,startAngle:90,endAngle:90+Math.max(50-l,0)/50*90,fill:"#00C49F"}),l>50&&(0,n.jsx)(c.L,{cx:i,cy:u,innerRadius:o,outerRadius:f,startAngle:90,endAngle:90-Math.max(l-50,0)/50*90,fill:"#00C49F"}),50===l&&(0,n.jsx)(c.L,{cx:i,cy:u,innerRadius:o,outerRadius:f,startAngle:90,endAngle:90,fill:"#00C49F"}),(0,n.jsx)("line",{x1:i,y1:u,x2:i+d*Math.cos(h),y2:u-d*Math.sin(h),stroke:"#FF5252",strokeWidth:5,strokeLinecap:"round"}),(0,n.jsx)("circle",{cx:i,cy:u,r:6,fill:"#FF5252"})]})}let o=(0,l.io)("ws://192.168.0.132:4000");var f=()=>{let[e,t]=(0,a.useState)(0),s=(0,a.useRef)(0),[l,c]=(0,a.useState)(""),[f,h]=(0,a.useState)(!1),[d,x]=(0,a.useState)(null),[g,w]=(0,a.useState)([]),[p,j]=(0,a.useState)([]),[m,y]=(0,a.useState)(50);(0,a.useEffect)(()=>{let e=(e,n,r)=>{t(e),h(r),c(n),s.current=e,console.log(e,n,r)};return o.on("selectGraph",e),()=>{o.off("selectGraph",e)}},[]),(0,a.useEffect)(()=>{let e=setInterval(()=>{0!==s.current&&_(s.current)},500);return()=>clearInterval(e)},[f,e,l]);let A=[],v=0,_=async e=>{if(A=[],v=0,f)try{let t=await r.Z.getAllAnswersByQuestionId(e);if(t.ok){let e=await t.json();if("hist"===l){let t=[...new Set(e.map(e=>e.answer))],s=t.map(t=>e.filter(e=>e.answer===t).length);w(t),j(s),x(e)}else if("gauge"===l){for(let t=0;t<e.length;t++)A.push(e[t].weight),v+=e[t].weight;if(0===A.length){y(50);return}y(v/(100*A.length)*100)}}}catch(e){}};return 0===e?(0,n.jsx)("div",{className:"bg-[#424242] h-screen text-white flex justify-center items-center text-5xl"}):(0,n.jsx)("div",{className:"w-full h-full flex justify-center items-center p-6 bg-[#2c2c2c]",children:!f||(0,n.jsxs)("div",{className:"w-full max-w-3xl bg-[#1f1f1f] p-6 rounded-2xl shadow-lg",children:["hist"===l&&(0,n.jsx)(i.v,{xAxis:[{id:"barCategories",data:g,scaleType:"band"}],yAxis:[{position:"none"}],series:[{data:p,color:"#7198f5"}],height:350,margin:{top:20,right:20,bottom:40,left:60},sx:{"& .MuiChartsAxis-root":{stroke:"#ccc"},"& .MuiChartsLegend-root":{fill:"#fff"}}}),"gauge"===l&&(0,n.jsx)("div",{className:"flex flex-col justify-evenly items-center",children:(0,n.jsx)(u,{value:m})})]})})},h=()=>(0,n.jsx)("div",{className:"bg-[#424242] h-screen w-screen",children:(0,n.jsx)(f,{})})},9638:function(e,t){"use strict";t.Z={getAllAnswersByQuestionId:e=>fetch("".concat("http://192.168.0.132:8000","/answer/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}),removeAllAnswersForQuestion:e=>fetch("".concat("http://192.168.0.132:8000","/answer/").concat(e,"/remove/all"),{method:"DELETE",headers:{"Content-Type":"application/json"}})}}},function(e){e.O(0,[642,377,774,888,179],function(){return e(e.s=4067)}),_N_E=e.O()}]);