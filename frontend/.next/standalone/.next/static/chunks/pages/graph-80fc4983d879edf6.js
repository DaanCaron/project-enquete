(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[645],{4067:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/graph",function(){return n(9250)}])},9250:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var s=n(5893),a=n(9638),i=n(7294),l=n(7642);n(1719);var r=n(5219),c=n(2550);function u(e){let{value:t,maxValue:n=100,size:a=1e3,height:i=520}=e,l=Math.min(Math.max(t,0),n)/n*100,r=a/2,u=a/2,o=.4*a,h=.48*a,f=(180-l/100*180)*Math.PI/180,d=.9*h;return(0,s.jsxs)("svg",{width:a,height:i,children:[(0,s.jsx)(c.L,{cx:r,cy:u,innerRadius:o,outerRadius:h,startAngle:180,endAngle:0,fill:"#eee"}),l<50&&(0,s.jsx)(c.L,{cx:r,cy:u,innerRadius:o,outerRadius:h,startAngle:90,endAngle:90+Math.max(50-l,0)/50*90,fill:"#00C49F"}),l>50&&(0,s.jsx)(c.L,{cx:r,cy:u,innerRadius:o,outerRadius:h,startAngle:90,endAngle:90-Math.max(l-50,0)/50*90,fill:"#00C49F"}),50===l&&(0,s.jsx)(c.L,{cx:r,cy:u,innerRadius:o,outerRadius:h,startAngle:90,endAngle:90,fill:"#00C49F"}),(0,s.jsx)("line",{x1:r,y1:u,x2:r+d*Math.cos(f),y2:u-d*Math.sin(f),stroke:"#FF5252",strokeWidth:5,strokeLinecap:"round"}),(0,s.jsx)("circle",{cx:r,cy:u,r:6,fill:"#FF5252"})]})}let o=(0,l.io)("ws://192.168.0.132:4000");var h=()=>{let[e,t]=(0,i.useState)(0),n=(0,i.useRef)(0),[l,c]=(0,i.useState)(""),[h,f]=(0,i.useState)(!1),[d,x]=(0,i.useState)(null),[g,p]=(0,i.useState)([]),[w,j]=(0,i.useState)([]),[m,y]=(0,i.useState)(50);(0,i.useEffect)(()=>{let e=(e,s,a)=>{t(e),f(a),c(s),n.current=e,console.log(e,s,a)};return o.on("selectGraph",e),()=>{o.off("selectGraph",e)}},[]),(0,i.useEffect)(()=>{let e=setInterval(()=>{0!==n.current&&_(n.current)},500);return()=>clearInterval(e)},[h,e,l]);let A=[],v=0,_=async e=>{if(A=[],v=0,h)try{let t=await a.Z.getAllAnswersByQuestionId(e);if(t.ok){let e=await t.json();if("hist"===l){let t=[...new Set(e.map(e=>e.answer))],n=t.map(t=>e.filter(e=>e.answer===t).length);p(t),j(n),x(e)}else if("gauge"===l){for(let t=0;t<e.length;t++)A.push(e[t].weight),v+=e[t].weight;if(0===A.length){y(50);return}y(v/(100*A.length)*100)}}}catch(e){}};return 0===e?(0,s.jsx)("div",{className:"bg-[#424242] h-screen text-white flex justify-center items-center text-5xl"}):(0,s.jsx)("div",{className:"w-full h-full flex justify-center items-center p-6 bg-[#2c2c2c]",children:!h||(0,s.jsxs)("div",{className:"w-full h-[700px]",children:["hist"===l&&(0,s.jsx)(r.v,{xAxis:[{id:"barCategories",data:g,scaleType:"band",tickLabelStyle:{fontWeight:600,fill:"#518eb9"}}],yAxis:[{position:"none"}],series:[{data:w,color:"#7198f5"}],height:700,margin:{top:20,right:20,bottom:100,left:20},sx:{"& .MuiChartsAxis-tickLabel tspan":{fontSize:"4rem"}}}),"gauge"===l&&(0,s.jsx)("div",{className:"flex flex-col justify-evenly items-center",children:(0,s.jsx)(u,{value:m})})]})})},f=()=>(0,s.jsx)("div",{className:"bg-[#424242] h-screen w-screen",children:(0,s.jsx)(h,{})})},9638:function(e,t){"use strict";t.Z={getAllAnswersByQuestionId:e=>fetch("".concat("http://192.168.0.132:8000","/answer/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}),removeAllAnswersForQuestion:e=>fetch("".concat("http://192.168.0.132:8000","/answer/").concat(e,"/remove/all"),{method:"DELETE",headers:{"Content-Type":"application/json"}})}}},function(e){e.O(0,[642,377,774,888,179],function(){return e(e.s=4067)}),_N_E=e.O()}]);